---
layout: post
title: "Messaging as a Service - Is it a fit for everyone?"
date: 2011-11-11 18:33
comments: false
categories:
---

I recently came across <a class="zem_slink" title="StormMQ" href="http://stormmq.com/" rel="homepage">StormMQ</a> - a Messaging as a <a class="zem_slink" title="Server (computing)" href="http://en.wikipedia.org/wiki/Server_%28computing%29" rel="wikipedia">Service</a> (MaaS) provider that gives you the ability to use a messaging infrastructure in the cloud. The aim is to be able to use messaging as utility using only as much as you need. Also, in the past I had heard about <a class="zem_slink" title="Amazon Simple Queue Service" href="http://en.wikipedia.org/wiki/Amazon_Simple_Queue_Service" rel="wikipedia">Amazon SQS</a> - a simple queuing service. I am sure there are many such providers and all of them aim to provide the same kind of service that we would expect from a virtual server from <a class="zem_slink" title="Rackspace" href="http://www.rackspace.com" rel="homepage">Rackspace</a> or <a class="zem_slink" title="Linode" href="http://www.linode.com" rel="homepage">Linode</a> - use as much messaging bandwidth or throughput as you need and pay for that.

But is this applicable for all businesses? Or all needs within an enterprise? There could be some cases where they can use messaging as a utility but there will be many cases where messaging is a lifeline - you just cannot live without it. This post aims to talk about some of these aspects.
<h3><!--more-->The different <a class="zem_slink" title="Use case" href="http://en.wikipedia.org/wiki/Use_case" rel="wikipedia">use cases</a> for messaging</h3>
Seven out of my seven and a half years of experience has been with messaging systems and in these years I have come across different use cases for messaging. In the very first project of my life I worked on building an adapter for the <a class="zem_slink" title="TIBCO Rendezvous" href="http://www.tibco.com/software/messaging/rendezvous" rel="homepage">TIBCO Rendezvous</a> messaging system.<a class="zem_slink" title="Recreational vehicle" href="http://en.wikipedia.org/wiki/Recreational_vehicle" rel="wikipedia">RV</a> as it is known is a very high speed messaging system that is used in trading floors - its capable of a lot. But one of the use cases for my adapter was this - the customer support executive in the front office of a telecom giant would onboard a customer and fill in some details. These need to get to the backend, get stored and be available by next day. There was absolutely no problem if the adapter died or RV went down and we had 24 hours to get it right.

In the second application that I built, we had to get SWIFT inter bank messages routed to different applications. The messaging system had three kinds of applications connected to it - those that cared how fast they got a message, those that cared only that the message get across reliably however slow and those that only used it for end of day data passage.

Few other applications that I built had a mix of such speed and data throughput requirements that were easy to achieve. Then I built one that had a simple requirement - 1 million messages an hour for 14 hours a day, not lose any message, record every message and record every ACK for every message and store that for 3 years - that simple requirement was all that we needed to meet to get sign off. And we worked our asses off for 3 weeks optimizing every single moving part of that architecture. It was what made us men from boys. And it was all custom code. No vendor tool.
<h3>Utility vs Lifeline</h3>
Messaging is like electricity - it is always available in the background running under the layers of flashy and money making applications and letting them do what they do best while taking the data across the world. In the bank that I work for no one notices me or bothers me that much on a given day unless they don't see an order or a price tick move as expected.

This comparison with electricity makes us feel that we can probably use it like electricity- turn off the main when you don't need that and when you are away from the house. Now that analogy works for a house, what about in a hospital - they don't treat it as a utility. There are lots of lives to be lost if you so that there. They need backup generators.

These days most homes have generators because you need electricity to be there all the time. I lived for 3 years in the <a class="zem_slink" title="United Kingdom" href="http://maps.google.com/maps?ll=51.5,-0.116666666667&amp;spn=10.0,10.0&amp;q=51.5,-0.116666666667 (United%20Kingdom)&amp;t=h" rel="geolocation">UK</a> Â and now nearly 2 in Japan and I know how taken-for-granted is the fact that electricity never goes. Its a different story in India, but thats not a good example.
<h3>The cost saving aspect of using a utility</h3>
While it is a good sales pitch to tell someone that you will take their cost incurring messaging systems and put that in a cloud and they can get more bandwidth magically when they need it and in the long run they pay less. It makes absolute sense in many ways.

But you also need to consider the fact that the day this cloud based service does not work you will be caught with your pants down. You need to plan your contingency approach and build and maintain some sort of a second messaging application. If your business or your application can cope with not being able to communicate for a few hours then that's fine, but otherwise this additional contingency planning adds to your long term cost - so you might not save as much as you had hoped for.

Another approach is to use two such providers so that at least one is always working - but that also is not that much of a cost saving.
<h3>More exposed to changes in the messaging layer than if you had your own</h3>
Someone once asked if - 'Do you understand the impact of random changes in the system and how much regression you need to do on the remaining parts of your system?'. It was an interview and they probably got the answer they were looking for.

If you own a messaging system, you control what is changed in that and how and when. If there is a fancy change going on that can impact your applications then you can put your foot down and get your way with it. If you use a cloud messaging provider then unless the provider gives you a guarantee that he will keep your messaging environment immune from all changes to any other part or changes made for improvements in the system, it is not possible to be sure that you wont have to change your stuff every now and then. Even though they will give you advance notice, it is not always possible that they will do the changes at your leisure. You are at the mercy of their schedule most of the time.
<h3>Speed of snail or speed of light?</h3>
When you own the servers and all the infrastructure, it is possible to tune it fully under your control to get the best performance from your messaging application. This is possible with a cloud based solution, but when there are issues you need to depend on someone outside your control and governed by an SLA to resolve the issue. Further, since there is a delay in getting into the cloud and out of it, there will be an increase in your end to end latency.
<h3>Security</h3>
Security is such a big issue these days - can you afford that someone can see your data flowing over a messaging layer that you do not fully control? Maybe if you are not doing anything related to sensitive information - but then there is a lot of information in every company that you will not want the competitors to see. Recent hacking incidents at Sony and other places are good enough examples of what kind of PR disasters can happen.
<h3>Conclusion</h3>
Although I have not covered all the aspects of messaging or <a class="zem_slink" title="cloud computing software" href="http://www.symantec.com/business/solutions/topics/?top_id=cloud" rel="symantec">cloud computing</a> in this post, it is clear that this cloud based approach to messaging does not fit all use cases. You need to decide whether it really makes sense for your business to use a cloud based messaging system and whether you actually save the amount of money that you expect to.